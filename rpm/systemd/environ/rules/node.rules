############
# cpu_idle #
############
node_cpu_core_idle_pct=irate(node_cpu{mode="idle"}[5s])
node_cpu_idle_pct=avg(node_cpu_core_idle_pct) by (cluster,ip)
node_cluster_cpu_idle_pct_avg=avg(node_cpu_idle_pct) by (cluster)
node_cluster_cpu_idle_pct_max=max(node_cpu_idle_pct) by (cluster)
node_cluster_cpu_idle_pct_min=min(node_cpu_idle_pct) by (cluster)
node_cluster_cpu_idle_pct_top10=topk(10,node_cpu_idle_pct) by (cluster)
#############
# cpu_usage #
#############
node_cpu_core_usage_pct=1 - node_cpu_core_idle_pct
node_cpu_usage_pct=1 - node_cpu_idle_pct
node_cluster_cpu_usage_pct_avg=avg(node_cpu_usage_pct) by (cluster)
node_cluster_cpu_usage_pct_min=min(node_cpu_usage_pct) by (cluster)
node_cluster_cpu_usage_pct_max=max(node_cpu_usage_pct) by (cluster)
node_cluster_cpu_usage_pct_top10=topk(10,node_cpu_usage_pct) by (cluster)
##############
# cpu_system #
##############
node_cpu_core_system_pct=irate(node_cpu{mode="system"}[5s])
node_cpu_system_pct=avg(node_cpu_core_system_pct) by (cluster,ip)
node_cluster_cpu_system_pct_avg=avg(node_cpu_system_pct) by (cluster)
node_cluster_cpu_system_pct_max=max(node_cpu_system_pct) by (cluster)
node_cluster_cpu_system_pct_min=min(node_cpu_system_pct) by (cluster)
node_cluster_cpu_system_pct_top10=topk(10,node_cpu_system_pct) by (cluster)
############
# cpu_user #
############
node_cpu_core_user_pct=irate(node_cpu{mode="user"}[5s])
node_cpu_user_pct=avg(node_cpu_core_user_pct) by (cluster,ip)
node_cluster_cpu_user_pct_avg=avg(node_cpu_user_pct) by (cluster)
node_cluster_cpu_user_pct_max=max(node_cpu_user_pct) by (cluster)
node_cluster_cpu_user_pct_min=min(node_cpu_user_pct) by (cluster)
node_cluster_cpu_user_pct_top10=topk(10,node_cpu_user_pct) by (cluster)
##############
# cpu_iowait #
##############
node_cpu_core_iowait_pct=irate(node_cpu{mode="iowait"}[5s])
node_cpu_iowait_pct=avg(node_cpu_core_iowait_pct) by (cluster,ip)
node_cluster_cpu_iowait_pct_max=max(node_cpu_iowait_pct) by (cluster)
node_cluster_cpu_iowait_pct_avg=avg(node_cpu_iowait_pct) by (cluster)
node_cluster_cpu_iowait_pct_min=min(node_cpu_iowait_pct) by (cluster)
node_cluster_cpu_iowait_pct_top10=topk(10,node_cpu_iowait_pct) by (cluster)
#############
# cpu_guest #
#############
node_cpu_core_guest_pct=irate(node_cpu{mode="guest"}[5s])
node_cpu_guest_pct=avg(node_cpu_core_guest_pct) by (cluster,ip)
node_cluster_cpu_guest_pct_avg=avg(node_cpu_guest_pct) by (cluster)
node_cluster_cpu_guest_pct_max=max(node_cpu_guest_pct) by (cluster)
node_cluster_cpu_guest_pct_min=min(node_cpu_guest_pct) by (cluster)
node_cluster_cpu_guest_pct_top10=topk(10,node_cpu_guest_pct) by (cluster)
###########
# cpu_irq #
###########
node_cpu_core_irq_pct=irate(node_cpu{mode="irq"}[5s])
node_cpu_irq_pct=avg(node_cpu_core_irq_pct) by (cluster,ip)
node_cluster_cpu_irq_pct_avg=avg(node_cpu_irq_pct) by (cluster)
node_cluster_cpu_irq_pct_min=min(node_cpu_irq_pct) by (cluster)
node_cluster_cpu_irq_pct_max=max(node_cpu_irq_pct) by (cluster)
node_cluster_cpu_irq_pct_top10=topk(10,node_cpu_irq_pct) by (cluster)
#############
# cpu_steal #
#############
node_cpu_core_steal_pct=irate(node_cpu{mode="steal"}[5s])
node_cpu_steal_pct=avg(node_cpu_core_steal_pct) by (cluster,ip)
node_cluster_cpu_steal_pct_avg=avg(node_cpu_steal_pct) by (cluster)
node_cluster_cpu_steal_pct_max=max(node_cpu_steal_pct) by (cluster)
node_cluster_cpu_steal_pct_min=min(node_cpu_steal_pct) by (cluster)
node_cluster_cpu_steal_pct_top10=topk(10,node_cpu_steal_pct) by (cluster)
############
# cpu_nice #
############
node_cpu_core_nice_pct=irate(node_cpu{mode="nice"}[5s])
node_cpu_nice_pct=avg(node_cpu_core_nice_pct) by (cluster,ip)
node_cluster_cpu_nice_pct_avg=avg(node_cpu_nice_pct) by (cluster)
node_cluster_cpu_nice_pct_min=min(node_cpu_nice_pct) by (cluster)
node_cluster_cpu_nice_pct_max=max(node_cpu_nice_pct) by (cluster)
node_cluster_cpu_nice_pct_top10=topk(10,node_cpu_nice_pct) by (cluster)
###############
# cpu_softirq #
###############
node_cpu_core_softirq_pct=irate(node_cpu{mode="softirq"}[5s])
node_cpu_softirq_pct=avg(node_cpu_core_softirq_pct) by (cluster,ip)
node_cluster_cpu_softirq_pct_avg=avg(node_cpu_softirq_pct) by (cluster)
node_cluster_cpu_softirq_pct_max=max(node_cpu_softirq_pct) by (cluster)
node_cluster_cpu_softirq_pct_min=min(node_cpu_softirq_pct) by (cluster)
node_cluster_cpu_softirq_pct_top10=topk(10,node_cpu_softirq_pct) by (cluster)
#############
# disk_read #
#############
node_disk_read_bps=irate(node_disk_bytes_read[5s])
node_disk_read_bps_sum=sum(node_disk_read_bps) by (ip, cluster)
node_cluster_disk_read_bps_avg=avg(node_disk_read_bps_sum) by (cluster)
node_cluster_disk_read_bps_min=min(node_disk_read_bps_sum) by (cluster)
node_cluster_disk_read_bps_max=max(node_disk_read_bps_sum) by (cluster)
node_cluster_disk_read_bps_sum=sum(node_disk_read_bps_sum) by (cluster)
node_cluster_disk_read_bps_top10=topk(10,node_disk_read_bps_sum) by (cluster)
##############
# disk_write #
##############
node_disk_write_bps=irate(node_disk_bytes_written[5s])
node_disk_write_bps_sum=sum(node_disk_write_bps) by (ip, cluster)
node_cluster_disk_write_bps_avg=avg(node_disk_write_bps_sum) by (cluster)
node_cluster_disk_write_bps_min=min(node_disk_write_bps_sum) by (cluster)
node_cluster_disk_write_bps_max=max(node_disk_write_bps_sum) by (cluster)
node_cluster_disk_write_bps_sum=sum(node_disk_write_bps_sum) by (cluster)
node_cluster_disk_write_bps_top10=topk(10,node_disk_write_bps_sum) by (cluster)
####################
# filesystem_avail #
####################
node_filesystem_avail_bytes_sum=sum(node_filesystem_avail) by (ip, cluster)
node_cluster_filesystem_avail_sum=sum(node_filesystem_avail_bytes_sum) by (cluster)
node_cluster_filesystem_avail_avg=avg(node_filesystem_avail_bytes_sum) by (cluster)
node_cluster_filesystem_avail_min=min(node_filesystem_avail_bytes_sum) by (cluster)
node_cluster_filesystem_avail_max=max(node_filesystem_avail_bytes_sum) by (cluster)
node_cluster_filesystem_avail_top10=topk(10,node_filesystem_avail_bytes_sum) by (cluster)
###################
# filesystem_size #
###################
node_filesystem_size_bytes_sum=sum(node_filesystem_size) by (ip, cluster)
node_cluster_filesystem_size_sum=sum(node_filesystem_size_bytes_sum) by (cluster)
node_cluster_filesystem_size_min=min(node_filesystem_size_bytes_sum) by (cluster)
node_cluster_filesystem_size_max=max(node_filesystem_size_bytes_sum) by (cluster)
node_cluster_filesystem_size_avg=avg(node_filesystem_size_bytes_sum) by (cluster)
node_cluster_filesystem_size_top10=topk(10,node_filesystem_size_bytes_sum) by (cluster)
###################
# filesystem_used #
###################
node_filesystem_used_bytes_sum=node_filesystem_size_bytes_sum - node_filesystem_avail_bytes_sum
node_cluster_filesystem_used_sum=sum(node_filesystem_used_bytes_sum) by (cluster)
node_cluster_filesystem_used_min=min(node_filesystem_used_bytes_sum) by (cluster)
node_cluster_filesystem_used_max=max(node_filesystem_used_bytes_sum) by (cluster)
node_cluster_filesystem_used_avg=avg(node_filesystem_used_bytes_sum) by (cluster)
node_cluster_filesystem_used_top10=topk(10,node_filesystem_used_bytes_sum) by (cluster)
####################
# disk_device_used #
####################
node_disk_device_used=node_filesystem_size - node_filesystem_avail
node_cluster_disk_device_used_avg=avg(node_disk_device_used) by (device,cluster)
node_cluster_disk_device_used_max=max(node_disk_device_used) by (device,cluster)
node_cluster_disk_device_used_min=min(node_disk_device_used) by (device,cluster)
node_cluster_disk_device_used_sum=sum(node_disk_device_used) by (device,cluster)
node_cluster_disk_device_used_top10=topk(10,node_disk_device_used) by (device,cluster)
######################
# node_disk_iops_sum #
######################
node_disk_iops=sum(node_disk_io_now) by (ip, cluster)
node_cluster_disk_iops_avg=avg(node_disk_iops) by (cluster)
node_cluster_disk_iops_min=min(node_disk_iops) by (cluster)
node_cluster_disk_iops_max=max(node_disk_iops) by (cluster)
node_cluster_disk_iops_sum=sum(node_disk_iops) by (cluster)
node_cluster_disk_device_iops_top10=topk(10,node_disk_io_now) by (device, cluster)
node_cluster_disk_iops_top10=topk(10,node_disk_iops) by (cluster)
##############
# node_load1 #
##############
node_cluster_load1_avg=avg(node_load1) by (cluster)
node_cluster_load1_min=min(node_load1) by (cluster)
node_cluster_load1_max=max(node_load1) by (cluster)
node_cluster_load1_top10=topk(10,node_load1) by (cluster)
##############
# node_load5 #
##############
node_cluster_load5_avg=avg(node_load5) by (cluster)
node_cluster_load5_min=min(node_load5) by (cluster)
node_cluster_load5_max=max(node_load5) by (cluster)
node_cluster_load5_top10=topk(10,node_load5) by (cluster)
###############
# node_load15 #
###############
node_cluster_load15_avg=avg(node_load15) by (cluster)
node_cluster_load15_min=min(node_load15) by (cluster)
node_cluster_load15_max=max(node_load15) by (cluster)
node_cluster_load15_top10=topk(10,node_load15) by (cluster)
####################
# memory_available #
####################
node_memory_available_pct=node_memory_MemAvailable/node_memory_MemTotal
node_cluster_memory_available_avg=avg(node_memory_MemAvailable) by (cluster)
node_cluster_memory_available_min=min(node_memory_MemAvailable) by (cluster)
node_cluster_memory_available_max=max(node_memory_MemAvailable) by (cluster)
node_cluster_memory_available_sum=sum(node_memory_MemAvailable) by (cluster)
node_cluster_memory_available_pct_avg=avg(node_memory_available_pct) by (cluster)
node_cluster_memory_available_pct_min=min(node_memory_available_pct) by (cluster)
node_cluster_memory_available_pct_max=max(node_memory_available_pct) by (cluster)
node_cluster_memory_available_pct_top10=topk(10,node_memory_available_pct) by (cluster)
node_cluster_memory_available_top10=topk(10,node_memory_MemAvailable) by (cluster)
################
# memory_usage #
################
node_memory_usage_pct=1-node_memory_available_pct
node_memory_usage=node_memory_MemTotal - node_memory_MemAvailable
node_cluster_memory_usage_avg=avg(node_memory_usage) by (cluster)
node_cluster_memory_usage_min=min(node_memory_usage) by (cluster)
node_cluster_memory_usage_max=avg(node_memory_usage) by (cluster)
node_cluster_memory_usage_sum=sum(node_memory_usage) by (cluster)
node_cluster_memory_usage_pct_avg=avg(node_memory_usage_pct) by (cluster)
node_cluster_memory_usage_pct_min=min(node_memory_usage_pct) by (cluster)
node_cluster_memory_usage_pct_max=max(node_memory_usage_pct) by (cluster)
node_cluster_memory_usage_top10=topk(10,node_memory_usage) by (cluster)
node_cluster_memory_usage_pct_top10=topk(10,node_memory_usage_pct) by (cluster)
###############
# memory_free #
###############
node_memory_free_pct=node_memory_MemFree/node_memory_MemTotal
node_cluster_memory_free_pct_avg=avg(node_memory_free_pct) by (cluster)
node_cluster_memory_free_pct_min=min(node_memory_free_pct) by (cluster)
node_cluster_memory_free_pct_max=max(node_memory_free_pct) by (cluster)
node_cluster_memory_free_avg=avg(node_memory_MemFree) by (cluster)
node_cluster_memory_free_min=min(node_memory_MemFree) by (cluster)
node_cluster_memory_free_max=max(node_memory_MemFree) by (cluster)
node_cluster_memory_free_sum=sum(node_memory_MemFree) by (cluster)
node_cluster_memory_free_pct_top10=topk(10,node_memory_free_pct) by (cluster)
node_cluster_memory_free_top10=topk(10,node_memory_MemFree) by (cluster)
################
# memory_total #
################
node_cluster_memory_total_avg=avg(node_memory_MemTotal) by (cluster)
node_cluster_memory_total_min=min(node_memory_MemTotal) by (cluster)
node_cluster_memory_total_max=max(node_memory_MemTotal) by (cluster)
node_cluster_memory_total_sum=sum(node_memory_MemTotal) by (cluster)
node_cluster_memory_total_top10=topk(10,node_memory_MemTotal) by (cluster)
################
# network_recv # 
################
node_network_recv_bps=irate(node_network_receive_bytes[5s])
node_cluster_network_recv_bps_avg=avg(node_network_recv_bps) by (cluster, device)
node_cluster_network_recv_bps_min=min(node_network_recv_bps) by (cluster, device)
node_cluster_network_recv_bps_max=max(node_network_recv_bps) by (cluster, device)
node_cluster_network_recv_bps_sum=sum(node_network_recv_bps) by (cluster, device)
node_cluster_network_recv_bps_top10=topk(10,node_network_recv_bps) by (cluster, device)
################
# network_send #
################
node_network_send_bps=irate(node_network_transmit_bytes[5s])
node_cluster_network_send_bps_avg=avg(node_network_send_bps) by (cluster, device)
node_cluster_network_send_bps_min=min(node_network_send_bps) by (cluster, device)
node_cluster_network_send_bps_max=max(node_network_send_bps) by (cluster, device)
node_cluster_network_send_bps_sum=sum(node_network_send_bps) by (cluster, device)
node_cluster_network_send_bps_top10=topk(10,node_network_send_bps) by (cluster, device)
################
# node_proces  #
################
node_cluster_procs_running_avg=avg(node_procs_running) by (cluster)
node_cluster_procs_running_min=min(node_procs_running) by (cluster)
node_cluster_procs_running_max=max(node_procs_running) by (cluster)
node_cluster_procs_blocked_avg=avg(node_procs_blocked) by (cluster)
node_cluster_procs_blocked_min=min(node_procs_blocked) by (cluster)
node_cluster_procs_blocked_max=max(node_procs_blocked) by (cluster)
node_cluster_procs_running_top10=topk(10,node_procs_running) by (cluster)
node_cluster_procs_blocked_top10=topk(10,node_procs_blocked) by (cluster)
